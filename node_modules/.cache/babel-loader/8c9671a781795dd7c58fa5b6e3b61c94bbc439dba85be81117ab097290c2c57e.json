{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FlowchartLink from './FlowchartLink.vue';\nimport FlowchartNode from './FlowchartNode.vue';\nimport { getMousePosition } from '../assets/utility/position.js';\nexport default {\n  name: 'SimpleFlowchart',\n  components: {\n    FlowchartLink,\n    FlowchartNode\n  },\n  props: {\n    scene: {\n      type: Object\n    },\n    height: {\n      type: Number,\n      default: 400\n    }\n  },\n  data() {\n    return {\n      localScene: this.scene,\n      action: {\n        linking: false,\n        dragging: null,\n        selected: null\n      },\n      mouse: {\n        x: 0,\n        y: 0,\n        lastX: 0,\n        lastY: 0\n      }\n    };\n  },\n  computed: {\n    lines() {\n      return this.localScene.links;\n    },\n    nodeOptions() {\n      // Add node options here\n      return {};\n    }\n  },\n  methods: {\n    linkingStart(id) {\n      this.action.linking = true;\n      this.action.dragging = id;\n    },\n    linkingStop(id) {\n      if (this.action.dragging !== id) {\n        const newLink = {\n          id: Math.max(...this.localScene.links.map(link => link.id)) + 1,\n          from: this.action.dragging,\n          to: id\n        };\n        this.localScene.links.push(newLink);\n        this.$emit('linkAdded', newLink);\n      }\n      this.action.linking = false;\n      this.action.dragging = null;\n    },\n    linkDelete(id) {\n      this.localScene.links = this.localScene.links.filter(link => link.id !== id);\n      this.$emit('linkDeleted', id);\n    },\n    nodeSelected(id, e) {\n      this.action.dragging = id;\n      this.action.selected = id;\n      this.mouse.lastX = e.pageX || e.clientX + document.documentElement.scrollLeft;\n      this.mouse.lastY = e.pageY || e.clientY + document.documentElement.scrollTop;\n      this.$emit('nodeSelected', id);\n    },\n    handleMove(e) {\n      if (this.action.linking) {\n        [this.mouse.x, this.mouse.y] = getMousePosition(this.$el, e);\n        [this.draggingLink.mx, this.draggingLink.my] = [this.mouse.x, this.mouse.y];\n      }\n      if (this.action.dragging) {\n        const node = this.localScene.nodes.find(node => node.id === this.action.dragging);\n        if (node) {\n          node.x += (this.mouse.x - this.mouse.lastX) / this.localScene.scale;\n          node.y += (this.mouse.y - this.mouse.lastY) / this.localScene.scale;\n          this.mouse.lastX = this.mouse.x;\n          this.mouse.lastY = this.mouse.y;\n        }\n      }\n      if (this.action.scrolling) {\n        [this.mouse.x, this.mouse.y] = getMousePosition(this.$el, e);\n        let diffX = this.mouse.x - this.mouse.lastX;\n        let diffY = this.mouse.y - this.mouse.lastY;\n        this.mouse.lastX = this.mouse.x;\n        this.mouse.lastY = this.mouse.y;\n        this.localScene.centerX += diffX;\n        this.localScene.centerY += diffY;\n      }\n    }\n  }\n};","map":{"version":3,"names":["FlowchartLink","FlowchartNode","getMousePosition","name","components","props","scene","type","Object","height","Number","default","data","localScene","action","linking","dragging","selected","mouse","x","y","lastX","lastY","computed","lines","links","nodeOptions","methods","linkingStart","id","linkingStop","newLink","Math","max","map","link","from","to","push","$emit","linkDelete","filter","nodeSelected","e","pageX","clientX","document","documentElement","scrollLeft","pageY","clientY","scrollTop","handleMove","$el","draggingLink","mx","my","node","nodes","find","scale","scrolling","diffX","diffY","centerX","centerY"],"sources":["/Users/kerinwong/Documents/VSCode_tutorial/my-simple-flowchart/src/components/SimpleFlowchart.vue"],"sourcesContent":["<template>\n    <div class=\"flowchart-container\">\n      <svg width=\"100%\" :height=\"`${height}px`\">\n        <flowchart-link v-for=\"(link, index) in lines\" :key=\"`link${index}`\" :link=\"link\" @deleteLink=\"linkDelete(link.id)\" />\n        <flowchart-node v-for=\"(node, index) in scene.nodes\" :key=\"`node${index}`\" :node=\"node\" :options=\"nodeOptions\" @linkingStart=\"linkingStart(node.id)\" @linkingStop=\"linkingStop(node.id)\" @nodeSelected=\"nodeSelected(node.id, $event)\" />\n      </svg>\n    </div>\n  </template>\n  \n  <script>\n  import FlowchartLink from './FlowchartLink.vue';\n  import FlowchartNode from './FlowchartNode.vue';\n  import { getMousePosition } from '../assets/utility/position.js';\n  \n  export default {\n    name: 'SimpleFlowchart',\n    components: {\n      FlowchartLink,\n      FlowchartNode,\n    },\n    props: {\n      scene: {\n        type: Object,\n      },\n      height: {\n        type: Number,\n        default: 400,\n      },\n    },\n    data() {\n      return {\n        localScene: this.scene,\n        action: {\n          linking: false,\n          dragging: null,\n          selected: null,\n        },\n        mouse: {\n          x: 0,\n          y: 0,\n          lastX: 0,\n          lastY: 0,\n        },\n      };\n    },\n    computed: {\n      lines() {\n        return this.localScene.links;\n      },\n      nodeOptions() {\n        // Add node options here\n        return {};\n      },\n    },\n    methods: {\n      linkingStart(id) {\n        this.action.linking = true;\n        this.action.dragging = id;\n      },\n      linkingStop(id) {\n        if (this.action.dragging !== id) {\n          const newLink = {\n            id: Math.max(...this.localScene.links.map(link => link.id)) + 1,\n            from: this.action.dragging,\n            to: id,\n          };\n          this.localScene.links.push(newLink);\n          this.$emit('linkAdded', newLink);\n        }\n        this.action.linking = false;\n        this.action.dragging = null;\n      },\n      linkDelete(id) {\n        this.localScene.links = this.localScene.links.filter(link => link.id !== id);\n        this.$emit('linkDeleted', id);\n      },\n      nodeSelected(id, e) {\n        this.action.dragging = id;\n        this.action.selected = id;\n        this.mouse.lastX = e.pageX || e.clientX + document.documentElement.scrollLeft;\n        this.mouse.lastY = e.pageY || e.clientY + document.documentElement.scrollTop;\n        this.$emit('nodeSelected', id);\n      },\n      handleMove(e) {\n        if (this.action.linking) {\n          [this.mouse.x, this.mouse.y] = getMousePosition(this.$el, e);\n          [this.draggingLink.mx, this.draggingLink.my] = [this.mouse.x, this.mouse.y];\n        }\n        if (this.action.dragging) {\n          const node = this.localScene.nodes.find(node => node.id === this.action.dragging);\n          if (node) {\n            node.x += (this.mouse.x - this.mouse.lastX) / this.localScene.scale;\n            node.y += (this.mouse.y - this.mouse.lastY) / this.localScene.scale;\n            this.mouse.lastX = this.mouse.x;\n            this.mouse.lastY = this.mouse.y;\n          }\n        }\n        if (this.action.scrolling) {\n          [this.mouse.x, this.mouse.y] = getMousePosition(this.$el, e);\n          let diffX = this.mouse.x - this.mouse.lastX;\n          let diffY = this.mouse.y - this.mouse.lastY;\n  \n          this.mouse.lastX = this.mouse.x;\n          this.mouse.lastY = this.mouse.y;\n  \n          this.localScene.centerX += diffX;\n          this.localScene.centerY += diffY;\n        }\n      },\n    },\n  };\n  </script>\n  \n  <style scoped lang=\"scss\">\n  .flowchart-container {\n    margin: 0;\n    background: #ddd;\n    position: relative;\n    overflow: hidden;\n    svg {\n      cursor: grab;\n    }\n  }\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}